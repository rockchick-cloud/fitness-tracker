<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fitness Tracker</title>

<style>
body {font-family: Arial; background:#f8fafc; padding:20px;}
.card {background:white;padding:20px;margin-bottom:20px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.05);}
button {padding:10px;border-radius:10px;border:none;margin:5px;cursor:pointer;}
.primary {background:black;color:white;}
.outline {background:white;border:1px solid #ccc;}
.badge {background:#eee;padding:4px 8px;border-radius:20px;font-size:12px;margin-left:5px;}
.grid {display:grid;grid-template-columns:repeat(7,1fr);gap:6px;}
.day {padding:6px;background:white;border-radius:8px;cursor:pointer;text-align:center;}
.done {background:#bbf7d0;}
</style>
</head>

<body>

<div class="card">
<h2>Fitness Tracker</h2>
<div id="streak"></div>
<div id="today"></div>
<button class="primary" onclick="startPlank()">Start 60s Plank</button>
<button class="outline" onclick="markPlank()">Mark Complete</button>
</div>

<div class="card">
<h3>Workout Today</h3>
<div id="schedule"></div>
</div>

<div class="card">
<h3>Calendar</h3>
<div class="grid" id="calendar"></div>
</div>

<script>
  // ---- storage ----
  const KEY_PLANK = "plankDone";
  const KEY_WORKOUTS = "workouts";

  let plankDone = JSON.parse(localStorage.getItem(KEY_PLANK) || "[]");
  let workouts = JSON.parse(localStorage.getItem(KEY_WORKOUTS) || "{}");

  // 0=Sun ... 6=Sat (JS default)
  const WEEK = {
    6: "Long Peloton Ride (60+ min)",
    0: "Yoga (20â€“30 min) + Walk (30 min)",
    1: "Bike Bootcamp",
    2: "Barre or Pilates (20 min) + Walk (30 min)",
    3: "Strength (30 min)",
    4: "Core (10 min) + Pilates (10 min) + Walk or Jog (30 min)",
    5: "Bike Bootcamp",
  };

  function iso(d) {
    return d.toISOString().slice(0, 10);
  }

  function todayISO() {
    return iso(new Date());
  }

  function save() {
    localStorage.setItem(KEY_PLANK, JSON.stringify(plankDone));
    localStorage.setItem(KEY_WORKOUTS, JSON.stringify(workouts));
  }

  // ---- plank actions ----
  function startPlank() {
    alert("Hold plank for 60 seconds ðŸ’ª\n(You can keep this simple or we can add a real timer next.)");
  }

  function markPlank() {
    const t = todayISO();
    if (!plankDone.includes(t)) {
      plankDone.push(t);
      save();
      render();
    }
  }

  // ---- workout actions ----
  function toggleWorkout(date) {
    workouts[date] = !workouts[date];
    save();
    render();
  }

  // ---- UI render ----
  function render() {
    // Streak + today status
    const streakEl = document.getElementById("streak");
    const todayEl = document.getElementById("today");
    const scheduleEl = document.getElementById("schedule");
    const calEl = document.getElementById("calendar");

    const t = todayISO();
    streakEl.innerHTML = `Planks completed: <b>${plankDone.length}</b>`;
    todayEl.innerHTML = plankDone.includes(t)
      ? `<span class="badge">Done today</span>`
      : `<span class="badge">Not yet</span>`;

    // Workout Today
    const dow = new Date().getDay();
    scheduleEl.textContent = WEEK[dow] || "Rest / Your choice";

    // Calendar (last 30 days)
    calEl.innerHTML = "";
    for (let i = 0; i < 30; i++) {
      const d = new Date();
      d.setDate(d.getDate() - i);
      const dISO = iso(d);

      const div = document.createElement("div");
      div.className = "day" + (workouts[dISO] ? " done" : "");
      div.innerHTML = `${d.getDate()}`;
      div.title = dISO + (workouts[dISO] ? " (Workout checked)" : " (Tap to check off)");
      div.onclick = () => toggleWorkout(dISO);

      calEl.appendChild(div);
    }
  }

  // Make functions available to your buttons
  window.startPlank = startPlank;
  window.markPlank = markPlank;

  render();
</script>
